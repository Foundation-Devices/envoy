# SPDX-FileCopyrightText: 2024 Foundation Devices, Inc. <hello@foundation.xyz>
# SPDX-License-Identifier: GPL-3.0-or-later

name: Beef QA
on:
  workflow_dispatch:
  schedule:
    - cron: '0 0 * * *'  # Run daily at midnight UTC
env:
  GITHUB_TOKEN: ${{ secrets.GITHUB_TOKEN }}
jobs:
  beef-qa:
    runs-on: [ self-hosted, macOS, ARM64 ]

    steps:
      - uses: extractions/setup-just@v1
      - uses: actions/checkout@v4

      - name: Install bindgen-cli (for aws-lc-sys)
        run: cargo install --force --locked bindgen-cli

      - name: Build ffi
        run: ./scripts/build_ffi_ios.sh

      - name: Run BeefQA Tests
        run: just qa
